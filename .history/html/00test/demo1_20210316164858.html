<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

//鼠标拖拽释放
box.addEventListener('drop', function(e){
    e.preventDefault();     //浏览器默认会打开该文件，因此停掉该默认事件
    // console.log(e.dataTransfer.files);      //选中的文件
    var files = e.dataTransfer.files;
    console.log(files)
    var formData = new FormData();
    
    Array.prototype.slice.call(files).forEach(function(file){
        formData.append('file', file);
    });
    
    var xhr = new XMLHttpRequest();
    xhr.upload.onerror = function(){
        alert('上传出错');
    }
    xhr.upload.onload = function(){
        alert('上传成功');
    }
    xhr.upload.onprogress = function(e){
        document.querySelector('progress').value = Math.floor(100*e.loaded/e.total);
    }
    xhr.open('post', '/upload', true);
    xhr.send(formData)
}, false);
    </script>
</body>
</html>